"""–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞"""
import requests

BASE_URL = "http://127.0.0.1:8001"


def check_scheduler():
  print("üìÖ –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–£–°–ê –ü–õ–ê–ù–ò–†–û–í–©–ò–ö–ê")
  print("=" * 40)

  # –ü–æ–∫–∞ —É –Ω–∞—Å –Ω–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞, –ø—Ä–æ–≤–µ—Ä–∏–º –∫–æ—Å–≤–µ–Ω–Ω–æ
  try:
    # –ü—Ä–æ–≤–µ—Ä–∏–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    response = requests.get(f"{BASE_URL}/", timeout=5)
    if response.status_code == 200:
      print("‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ")

      # –ü—Ä–æ–≤–µ—Ä–∏–º API
      response = requests.get(f"{BASE_URL}/api/v1/4x20/history", timeout=10)
      if response.status_code == 200:
        history = response.json()
        if history:
          last_draw = history[0]
          print(f"üìä –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ç–∏—Ä–∞–∂: #{last_draw.get('–¢–∏—Ä–∞–∂')} ({last_draw.get('–î–∞—Ç–∞')})")
        print(f"üìà –¢–∏—Ä–∞–∂–µ–π –≤ –∏—Å—Ç–æ—Ä–∏–∏: {len(history)}")

      print(f"\nüí° –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ:")
      print(f"   üìÖ 4x20: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ç–∏—Ä–∞–∂–µ–π (10:00, 12:00, 13:00, 16:00, 18:00, 20:00, 22:00)")
      print(f"   üìÖ 5x36plus: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç")

    else:
      print("‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")

  except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞: {e}")


if __name__ == "__main__":
  check_scheduler()